import os
from rich.console import Console
from rich.text import Text
from tabulate import tabulate
from rich.table import Table
from rich import box
from typing import List
from prompt_toolkit import Application
from prompt_toolkit.layout import Layout, Window, HSplit
from prompt_toolkit.layout.controls import FormattedTextControl
from prompt_toolkit.key_binding import KeyBindings
from prompt_toolkit.formatted_text import HTML
from prompt_toolkit.styles import Style
import questionary
from questionary import Style as QuestionaryStyle
import asyncio
import sys


def show_logo():
    """ÊòæÁ§∫Êó∂Â∞öÁöÑ STARLABS ÂæΩÊ†á"""
    # –û—á–∏—â–∞–µ–º —ç–∫—Ä–∞–Ω
    os.system("cls" if os.name == "nt" else "clear")

    console = Console()

    # Áî®È£éÊ†ºÂåñÁöÑÂæΩÊ†áÂàõÂª∫ÊòüÁ©∫
    logo_text = """
‚ú¶ Àö . ‚ãÜ   Àö ‚ú¶  Àö  ‚ú¶  . ‚ãÜ Àö   ‚ú¶  . ‚ãÜ Àö   ‚ú¶ Àö . ‚ãÜ   Àö ‚ú¶  Àö  ‚ú¶  . ‚ãÜ   Àö ‚ú¶  Àö  ‚ú¶  . ‚ãÜ ‚ú¶ Àö 
. ‚ãÜ Àö ‚úß  . ‚ãÜ Àö  ‚ú¶ Àö . ‚ãÜ  Àö ‚ú¶ . ‚ãÜ Àö  ‚ú¶ Àö . ‚ãÜ  Àö ‚ú¶ . ‚ãÜ Àö  ‚ú¶ Àö . ‚ãÜ  Àö ‚ú¶ . ‚ãÜ  Àö ‚ú¶ .‚ú¶ Àö . 
¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ¬∑Àö ‚òÖ ¬∑Àö
‚úß ‚ãÜÔΩ°Àö‚ú¶ ‚ãÜÔΩ°  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ãÜÔΩ° ‚ú¶Àö‚ãÜÔΩ° 
‚òÖ ¬∑Àö ‚ãÜÔΩ°Àö   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ú¶Àö‚ãÜÔΩ° Àö¬∑ 
‚ãÜÔΩ°‚úß ‚ãÜ ‚òÖ    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   Àö¬∑ ‚òÖ ‚ãÜ
Àö¬∑ ‚òÖ ‚ãÜÔΩ°    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë   ‚ãÜ ‚úßÔΩ°‚ãÜ 
‚úß ‚ãÜÔΩ° Àö¬∑    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚òÖ ¬∑Àö ÔΩ°
‚òÖ ¬∑Àö ‚úß     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ÔΩ°‚ãÜ ‚úß 
¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°. ‚òÖ ¬∑Àö ‚òÖ ¬∑Àö¬∑Àö ‚ãÜÔΩ°‚ãÜÔΩ°.
. ‚ãÜ Àö ‚úß  . ‚ãÜ Àö  ‚ú¶ Àö . ‚ãÜ  Àö ‚ú¶ . ‚ãÜ Àö  ‚ú¶ Àö . ‚ãÜ  Àö ‚ú¶ . ‚ãÜ Àö  ‚ú¶ Àö . ‚ãÜ  Àö ‚ú¶ . ‚ãÜ  Àö ‚ú¶ .. ‚ãÜ  Àö 
‚ú¶ Àö . ‚ãÜ   Àö ‚ú¶  Àö  ‚ú¶  . ‚ãÜ Àö   ‚ú¶  . ‚ãÜ Àö   ‚ú¶ Àö . ‚ãÜ   Àö ‚ú¶  Àö  ‚ú¶  . ‚ãÜ   Àö ‚ú¶  Àö  ‚ú¶  . ‚ãÜ  ‚ú¶"""

    # ÂàõÂª∫Ê∏êÂèòÊñáÊú¨
    gradient_logo = Text(logo_text)
    gradient_logo.stylize("bold bright_cyan")

    # Â∏¶Áº©ËøõÁöÑËæìÂá∫
    console.print(gradient_logo)
    print()


def show_dev_info():
    """ÊòæÁ§∫ÂºÄÂèëÂíåÁâàÊú¨‰ø°ÊÅØ"""
    console = Console()

    # ËÆ©Êàë‰ª¨ÂàõÂª∫‰∏Ä‰∏™Áæé‰∏ΩÁöÑÈ§êÊ°å
    table = Table(
        show_header=False,
        box=box.DOUBLE,
        border_style="bright_cyan",
        pad_edge=False,
        width=49,
        highlight=True,
    )

    # Ê∑ªÂä†Âàó
    table.add_column("Content", style="bright_cyan", justify="center")

    # Ê∑ªÂä†ËÅîÁ≥ª‰∫∫Á∫øË∑Ø
    table.add_row("‚ú® StarLabs Monad Bot 1.8 ‚ú®")
    table.add_row("‚îÄ" * 43)
    table.add_row("")
    table.add_row("‚ö° GitHub: [link]https://github.com/0xStarLabs[/link]")
    table.add_row("üë§ Dev: [link]https://t.me/StarLabsTech[/link]")
    table.add_row("üí¨ Chat: [link]https://t.me/StarLabsChat[/link]")
    table.add_row("")

    # ËæìÂá∫Â∏¶Áº©ËøõÁöÑË°®Ê†º
    print("   ", end="")
    print()
    console.print(table)
    print()


async def show_menu(title: str, options: List[str]) -> str:
    """
    Displays an interactive menu with the given options and returns the selected option.
    """
    try:
        # Add empty lines for spacing
        print("\n")

        # Create custom style with larger text
        custom_style = QuestionaryStyle(
            [
                ("question", "fg:#B8860B bold"),  # Title color - muted gold
                ("answer", "fg:#ffffff bold"),  # Selected option color - white
                ("pointer", "fg:#B8860B bold"),  # Pointer color - muted gold
                (
                    "highlighted",
                    "fg:#B8860B bold",
                ),  # Highlighted option color - muted gold
                ("instruction", "fg:#666666"),  # Instruction text color - gray
            ]
        )

        print()

        # Show the menu with custom style
        result = await questionary.select(
            title,
            choices=options,  # –ò—Å–ø–æ–ª—å–∑—É–µ–º options –Ω–∞–ø—Ä—è–º—É—é, —Ç–∞–∫ –∫–∞–∫ —ç–º–æ–¥–∑–∏ —É–∂–µ –µ—Å—Ç—å
            style=custom_style,
            qmark="üéØ",  # Custom pointer
            instruction="(Use arrow keys and Enter to select)",
        ).ask_async()

        return result

    except KeyboardInterrupt:
        print("\n\nExiting program... Goodbye! üëã")
        sys.exit(0)
